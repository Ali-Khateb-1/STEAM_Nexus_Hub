<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>David Walker Parfum — Reveal</title>
  <style>
    body {
      margin: 0;
      background: black;
      overflow: hidden;
    }
    canvas {
      display: block;
      margin: auto;
      background: black;
    }
  </style>
</head>
<body>
<canvas id="logoCanvas"></canvas>

<script>
  const canvas = document.getElementById('logoCanvas');
  const ctx = canvas.getContext('2d');
  const img = new Image();
  img.src = "David Walker_Parfum.jpg"; // تأكد أن الصورة في نفس المجلد

  img.onload = () => {
    const w = img.width;
    const h = img.height;
    canvas.width = w;
    canvas.height = h;

    const bufferCanvas = document.createElement('canvas');
    bufferCanvas.width = w;
    bufferCanvas.height = h;
    const btx = bufferCanvas.getContext('2d');
    btx.drawImage(img, 0, 0);
    const fullData = btx.getImageData(0, 0, w, h).data;

    let yOffsets = Array(w).fill(0);
    const centerX = Math.floor(w / 2);
    const centerY = Math.floor(h / 2);
    const safeRadius = 100; // نصف قطر المنطقة المحمية حول الزجاجة

    function draw() {
      const frame = ctx.getImageData(0, 0, w, h);
      const data = frame.data;

      for (let x = 0; x < w; x++) {
        const y = Math.floor(yOffsets[x]);
        if (y >= h) continue;

        const dx = x - centerX;
        const dy = y - centerY;
        const distance = Math.sqrt(dx * dx + dy * dy);

        if (distance < safeRadius) continue; // تجاهل المنطقة الوسطى

        const i = (y * w + x) * 4;
        data[i] = fullData[i];
        data[i+1] = fullData[i+1];
        data[i+2] = fullData[i+2];
        data[i+3] = fullData[i+3];

        yOffsets[x] += Math.random() * 1.5 + 0.5;
      }

      ctx.putImageData(frame, 0, 0);
      requestAnimationFrame(draw);
    }

    draw();
  }
</script>
</body>
</html>
